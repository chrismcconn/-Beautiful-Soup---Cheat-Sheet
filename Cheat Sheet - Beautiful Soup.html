<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8"/>
<meta content="initial-scale=1.0, user-scalable=yes,, minimum-scale=0.25, maximum-scale=5.0" name="viewport">
<title>Beautiful Soup – Cheat Sheet</title>
<style>

.group {
  font-weight:bold;
}

pre { overflow-x: auto; overflow-y: hidden; }

pre { padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 120%; border-top-width: 1px; border-bottom-width: 1px; border-style: solid none; border-top-color: rgb(170, 204, 153); border-bottom-color: rgb(170, 204, 153); }

.comment {color: crimson;}
.string {color: forestgreen;}
.docstring {color: forestgreen; font-style:italic;}
.keyword {color: darkorange;}
.builtin {color: purple;}
.definition {color: darkorange; font-weight:bold;}
.defname {color: blue;}
.operator {color: brown;}
.tag  {color: blue;}
</style>
<script>
  
function copyDivToClipboard() {
  var range = document.createRange();
  range.selectNode(document.getElementById("a"));
 window.getSelection().removeAllRanges(); // clear current selection
 window.getSelection().addRange(range); // to select text
 document.execCommand("copy");
 window.getSelection().removeAllRanges();// to deselect
}
</script>
</meta></head>
<body>
<h1>Beautiful Soup – Cheat Sheet</h1>
<p>Cheat sheet for Beautiful Soup version 4.12.3</p>
<p><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" id="replace">Beautiful Soup Documentation</a></p>
<br/>
<h3>Table of Contents</h3>
<!--
AUTO-GENERATED TOC 
-->
<!--TOC-Start-->
<p class="toc"><a href="#GeneralStuff">General stuff</a></p><p class="toc"><a href="#TestingCode">Code snippet for testing ideas</a></p><p class="toc"><a href="#FindTags">.find() - Find tags</a></p><p class="toc"><a href="#FindAll">.find_all() - Loop through Tags</a></p><p class="toc"><a href="#FindComments">Find all Comments</a></p><p class="toc"><a href="#Attribute">tag["attribute"] - View/Modify Attributes</a></p><p class="toc"><a href="#FindStrings">.strings and .find_all(string=)  - Loop through strings</a></p><p class="toc"><a href="#StringView">.string and .strings - View/Modify text</a></p><p class="toc"><a href="#TagContents">Loop through tag contents</a></p><p class="toc"><a href="#Navigating">Navigating</a></p><p class="toc"><a href="#Modify">Replace a tag with HTML</a></p><p class="toc"><a href="#NewTag">.new_tag() - Create new tag</a></p><p class="toc"><a href="#InsertAppend"> .insert_before()  .insert_after(), .insert(0) and .append()</a></p><p class="toc"><a href="#insert">.insert() - Add tag/text at numeric position</a></p><p class="toc"><a href="#ReplaceWith">.replace_with() - Replace tag and contents</a></p><p class="toc"><a href="#Wrap">.wrap() - Wrap tag</a></p><p class="toc"><a href="#Unwrap">.unwrap() - Remove tag, leave contents</a></p><p class="toc"><a href="#ReplaceTag">Replace tag, don't change contents</a></p><p class="toc"><a href="#Clear">.clear() - Leave tag, clear contents</a></p><p class="toc"><a href="#Extract">.extract() - Remove tag and contents</a></p><p class="toc"><a href="#Decompose">.decompose() - Just like extract(), but obliterates tag and contents</a></p>
<!--TOC-End-->
<a name="GeneralStuff"> </a>
<p class="group">General stuff</p>
<pre>
<b># Read in a file and make soup</b>
from bs4 import BeautifulSoup
with open(filename, "r", encoding="UTF-8") as f:
  html = f.read()
soup = BeautifulSoup(html, "html.parser")


<b># Convert soup to a string, save to file</b>
html = str(soup)
with open(filename, "w", encoding="UTF-8") as f:
  f.write(html)


<b># .get_text() - Remove all html tags</b>
text_only = soup.get_text() 


<b># .prettify() - Prettify the HTML</b>
soup.prettify()
</pre>
<a name="TestingCode"> </a>
<p class="group">Code snippet for testing ideas</p>
<pre>
from bs4 import BeautifulSoup
html = """
<span class="tag">&lt;html&gt;</span><span class="tag">&lt;head&gt;</span><span class="tag">&lt;title&gt;</span>The Dormouse's story<span class="tag">&lt;/title&gt;</span><span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
<span class="tag">&lt;!--Comment--&gt;</span>
<span class="tag">&lt;p class="title"&gt;</span><span class="tag">&lt;b&gt;</span>The Dormouse's story<span class="tag">&lt;/b&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p class="story"&gt;</span>Two sisters
<span class="tag">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;</span>Elsie<span class="tag">&lt;/a&gt;</span> and
<span class="tag">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;</span>Lacie<span class="tag">&lt;/a&gt;</span> 
lived in a well.<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p class="story"&gt;</span>...<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span>
"""
soup = BeautifulSoup(html, "html.parser")
</pre>
<a name="FindTags"> </a>
<p class="group">.find() - Find tags</p>
<pre>
<b># Print <span class="tag">&lt;title&gt;</span></b>
print(soup.title)

# Note: if no title, this would print None


<b># Find anchor with class="sister"</b>
a = soup.find("a", class_="sister")
if a:
  print("Anchor with class=sister found.")


<b># Find anchor with no href</b>
a = soup.find("a", href=None)
if a:
  print("Anchor missing href found.")
  
  
<b># Find nested tag</b>
if soup.find("head").find("link"):
  print("Head section has link(s)")
else:
  print("Head section missing link(s)")
</pre>
<a name="FindAll"> </a>
<p class="group">.find_all() - Loop through Tags</p>
<pre>
   
<b># .find_all("a") - Print all anchors</b>
for tag in soup.find_all("a"):
  print("Anchor: ", tag)


<b># soup("a") - Print all anchors - 2nd method</b>
for tag in soup("a"):
  print("Anchor: ", tag)
    

<b># Find all anchors with no class</b>
for tag in soup.find_all("a", class_=None):
  print("Anchor: ", tag)

# “class” is a reserved word in Python,
# and the only attribute that needs an
# underscore "class_" when used
# in find() or find_all()


<b># Loop through multiple tag types at same time</b>
for tag in soup(["a","ul"]):
  print("Tag: ", tag)


<b># Print all tags, ignore text</b>
for tag in soup(True):
  print("Tag: ", tag)
  

<b># Print nested tags</b> 

# Print anchors in the main section
if soup.find("main"):
  for tag in soup.main.find_all("a"):
    print("\nAnchor in Main: ", tag)
else:
  print("Main section NOT found") 


<b># To any of these loops you can add:</b>
  tag.extract()        # Delete the tags
  tag.clear()          # Clear tag's contents
  tag.replace_with()   # Replace tags with new tags
  tag.insert_before()  # Insert new tags before tags
  tag.insert_after()   # Insert after
  tag.append()         # Append new tags inside tags
  tag.wrap()           # Wrap tags inside new tags
  tag.string           # View or change a tags text
  tag.has_attrib()     # Test if a tag has an attribute
  tag["attribute"] =   # Add/modify attribute
  
</pre>
<a name="FindComments"> </a>
<p class="group">Find all Comments</p>
<pre>
from bs4 import BeautifulSoup
from bs4 import Comment

soup = BeautifulSoup(html, 'html.parser')
for tag in soup.find_all(string=lambda text: isinstance(text, Comment)):
  print("Comment: ", tag)

#  Note:  soup.find_all("!--") does not work
</pre>
<a name="Attribute"> </a>
<p class="group">tag["attribute"] - View/Modify Attributes</p>
<pre>
from bs4 import BeautifulSoup
markup = """<span class="tag">&lt;b class="blue"&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>"""
soup = BeautifulSoup(markup, "html.parser")
tag = soup.b


<b># .attrs - List a tag's attributes</b>  
for a in tag.attrs:
  print("attr: ", a)   # class
  
  
<b># .has_attr() - Test if tag has an attribute</b>
if tag.has_attr("class"):
  print("Tag has class")
  
  
<b># View attribute with tag["attribute"]</b>  
if tag.has_attr("class"):
  a = tag["class"]
  print("class: ", a)      # ["blue"]
  print("type: ", type(a)) # <span class="tag">&lt;class 'list'&gt;</span>


<b># View attribute with tag.get()</b>
a = tag.get("class")
print("class: ", a)      # ["blue"]
print("type: ", type(a)) # <span class="tag">&lt;class 'list'&gt;</span>

# If no attribute, .get() returns None
a = tag.get("id")
print("id: ", a)       # None


<b># Change attribute</b>  

# This changes the attribute from blue to red
# and, as of version 4.12.3, also changes 
# the type in the parse tree from list to string

print("class: ", tag["class"] )      # ["blue"]
print("class type: ", type(tag["class"])) # <span class="tag">&lt;class 'list'&gt;</span>

tag["class"] = "red"

print(soup)   # <span class="tag">&lt;b class="red"&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>
print("class type: ", type(tag["class"])) # <span class="tag">&lt;class 'str'&gt;</span>

# This keeps the type in the parse tree a list

tag["class"] = ["red"]

print(soup)   # <span class="tag">&lt;b class="red"&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>
print("class type: ", type(tag["class"])) # <span class="tag">&lt;class 'list'&gt;</span>


<b># Delete an attribute</b>
del tag["class"]
print(tag)   # <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>


<b># Multi-valued attribute in class </b>  
markup = """<span class="tag">&lt;b class="blue green purple"&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>"""
soup = BeautifulSoup(markup, "html.parser")

print("class: ", tag["class"])  # ['blue', 'green' ,'purple']
</pre>
<a name="FindStrings"> </a>
<p class="group">.strings and .find_all(string=)  - Loop through strings</p>
<pre>
<b># .strings</b>
for s in soup.strings:
  print(repr(s))
    
    
<b># .stripped_strings - Print strings with
#    extra white space removed</b>
for s in soup.stripped_strings:
  print(repr(s))
  
  
<b># .find_all(string=) - Find strings using regexp</b>  
for s in soup.find_all(string=re.compile("and")):
  print("String: ", repr(s))
</pre>
<a name="StringView"> </a>
<p class="group">.string and .strings - View/Modify text</p>
<pre>
<b># Example of using .string</b>
from bs4 import BeautifulSoup
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>", "html.parser")

print(soup.b.string)   # Some text

<b># .string works if <span class="tag">&lt;b&gt;</span> is nested in <span class="tag">&lt;p&gt;</span></b>
soup = BeautifulSoup("<span class="tag">&lt;p&gt;</span><span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span><span class="tag">&lt;/p&gt;</span>", "html.parser")

print(soup.p.b.string)   # Some text
print(soup.p.string)     # Some text

<b># But .string is None in this situation</b>
markup = "<span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;i&gt;</span>more<span class="tag">&lt;/i&gt;</span> text<span class="tag">&lt;/b&gt;</span>"
soup = BeautifulSoup(markup, "html.parser")
tag = soup.b

print(tag)         # <span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;i&gt;</span>more<span class="tag">&lt;/i&gt;</span> text<span class="tag">&lt;/b&gt;</span>
print(tag.string)  # None


<b># If .string is None, try .strings or .get_text()</b>
markup = "<span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;i&gt;</span>more <span class="tag">&lt;/i&gt;</span>text<span class="tag">&lt;/b&gt;</span>"
soup = BeautifulSoup(markup, "html.parser")
tag = soup.b

print("tag: ", tag)  
 
# Tag has text if len(tag.get_text()) &gt; 0
if len(tag.get_text()) == 0:
  print("No text")
  
elif tag.string:
  print(".string: ", tag.string)
  
else:
  print("Tag has text")     
  print(".strings: ", list(tag.strings))  
  print(".get_text(): ", tag.get_text()) 

# tag: <span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;i&gt;</span>more <span class="tag">&lt;/i&gt;</span>text<span class="tag">&lt;/b&gt;</span>    
# .strings:  ['Some ', 'more ', 'text']
# .get_text(): Some more text   

    
<b># Comparing .string .strings and .get_text()</b>

# This how .string, .strings and .get_text()
# respond to different tag structures

def view_text(s):
  soup = BeautifulSoup(s, "html.parser")
  print()
  print("#", soup)
  print("# get_text():", repr(soup.get_text()))
  print("# .string:   ", soup.p.string)
  print("# .strings:  ", list(soup.p.strings))
  print("# .strings count:", len(list(soup.p.strings)))

# Try out different tag structures

view_text("<span class="tag">&lt;p&gt;</span><span class="tag">&lt;/p&gt;</span>")
view_text("<span class="tag">&lt;p&gt;</span>some<span class="tag">&lt;/p&gt;</span>")
view_text("<span class="tag">&lt;p&gt;</span>some<span class="tag">&lt;b&gt;</span><span class="tag">&lt;/b&gt;</span><span class="tag">&lt;/p&gt;</span>")
view_text("<span class="tag">&lt;p&gt;</span>some<span class="tag">&lt;b&gt;</span> more <span class="tag">&lt;/b&gt;</span><span class="tag">&lt;/p&gt;</span>")
view_text("<span class="tag">&lt;p&gt;</span>some<span class="tag">&lt;b&gt;</span> more <span class="tag">&lt;/b&gt;</span>text<span class="tag">&lt;/p&gt;</span>")

# Here's the output:

<b># <span class="tag">&lt;p&gt;</span><span class="tag">&lt;/p&gt;</span></b>
# get_text(): ''
# .string:    None
# .strings:   []
# .strings count: 0

<b># <span class="tag">&lt;p&gt;</span>some<span class="tag">&lt;/p&gt;</span></b>
# get_text(): 'some'
# .string:     some
# .strings:   ['some']
# .strings count: 1

# Note --- empty tag next to string
#    and .string becomes None

<b># <span class="tag">&lt;p&gt;</span>some<span class="tag">&lt;b&gt;</span><span class="tag">&lt;/b&gt;</span><span class="tag">&lt;/p&gt;</span></b>
# get_text(): 'some'
# .string:    None
# .strings:   ['some']
# .strings count: 1

<b># <span class="tag">&lt;p&gt;</span>some<span class="tag">&lt;b&gt;</span> more <span class="tag">&lt;/b&gt;</span><span class="tag">&lt;/p&gt;</span></b>
# get_text(): 'some more '
# .string:    None
# .strings:   ['some', ' more ']
# .strings count: 2

<b># <span class="tag">&lt;p&gt;</span>some<span class="tag">&lt;b&gt;</span> more <span class="tag">&lt;/b&gt;</span>text<span class="tag">&lt;/p&gt;</span></b>
# get_text(): 'some more text'
# .string:    None
# .strings:   ['some', ' more ', 'text']
# .strings count: 3

  
<b># View/Modify text using .strings as a list</b>
markup = "<span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;i&gt;</span>more<span class="tag">&lt;/i&gt;</span> text<span class="tag">&lt;/b&gt;</span>"
soup = BeautifulSoup(markup, "html.parser")
tag = soup.b

# .strings is an iterator so these throw errors:
#    tag.strings[0]
#    len(tag.strings)

# But you can turn .strings into a list
strings = list(tag.strings)

print("strings[0]: ", strings[0])  
print("strings[1]: ", strings[1]) 
print("strings[2]: ", strings[2])  
print("len(strings): ", len(strings))  

# strings[0]: Some
# strings[1]: more
# strings[2]:  text
# len(strings): 3

# To modify text, use .replace_with()
strings[0].replace_with("X")
strings[1].replace_with("Y")
strings[2].replace_with("Z")

strings[0] = "A"   # This does not work

print(soup)  # <span class="tag">&lt;b&gt;</span>X<span class="tag">&lt;i&gt;</span>Y<span class="tag">&lt;/i&gt;</span>Z<span class="tag">&lt;/b&gt;</span>

# .replace_with() works with .strings
#  but these methods throw errors:
#
#    .extract()
#    .append("X")
#    .insert_before("X")
#    .insert_after("X")
#    .insert(0, "X")
#    .wrap(new_tag("u"))


<b># View/Modify .strings that are direct children</b>

# Everything is the same as above...
# ...except for how the list is created

markup = "<span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;i&gt;</span>more<span class="tag">&lt;/i&gt;</span> text<span class="tag">&lt;/b&gt;</span>"
soup = BeautifulSoup(markup, "html.parser")
tag = soup.b

strings = list(tag.find_all(string=True, recursive=False))

print("strings[0]: ", strings[0])
print("strings[1]: ", strings[1])
print("len(strings): ", len(strings))

# strings[0]: Some
# strings[1]:  text
# len(strings): 2

strings[0].replace_with("X")
strings[1].replace_with("Y")

print(soup)  #  <span class="tag">&lt;b&gt;</span>X<span class="tag">&lt;i&gt;</span>more<span class="tag">&lt;/i&gt;</span>Y<span class="tag">&lt;/b&gt;</span>"
 
 
<b># Replace text using .string</b>
from bs4 import BeautifulSoup
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>", "html.parser")
tag = soup.b
tag.string = "New text"

print(soup)   # <span class="tag">&lt;b&gt;</span>New text<span class="tag">&lt;/b&gt;</span>

<b># CAREFUL when setting .string</b>

# Whatever is inside the tag will get replaced
# with the new string.

<i><b># That means any nested tags get deleted.</b></i>

markup = "<span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;i&gt;</span>more<span class="tag">&lt;/i&gt;</span> text<span class="tag">&lt;/b&gt;</span>"
soup = BeautifulSoup(markup, "html.parser")
tag = soup.b
tag.string = "New text"

print(soup)   # <span class="tag">&lt;b&gt;</span>New text<span class="tag">&lt;/b&gt;</span>


<b># Append text using .string</b>
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span>New text<span class="tag">&lt;/b&gt;</span>", "html.parser")
tag = soup.b
tag.string += " - really new"

print(soup)   # <span class="tag">&lt;b&gt;</span>New text - really new<span class="tag">&lt;/b&gt;</span>


<b># Can't add tags by modifying .string</b>
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>", "html.parser")
soup.b.string = "New <span class="tag">&lt;i&gt;</span>text<span class="tag">&lt;/i&gt;</span>"
print(soup)   # <span class="tag">&lt;b&gt;</span>New &amp;lt;i&amp;gt;text&amp;lt;/i&amp;gt;<span class="tag">&lt;/b&gt;</span>

<b># Instead use .new_tag() and .append()</b>
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>", "html.parser")
tag.string = "New "
t = soup.new_tag("i")
t.string = "text"
tag.append(t)  

# .append inserts the new tag inside
#   the bold tag, at the end

print(soup)   # <span class="tag">&lt;b&gt;</span>New <span class="tag">&lt;i&gt;</span>text<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/b&gt;</span>


<b># Add text with .insert_before() .insert_after() .insert(0) or .append()</b>
markup = "<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>"
soup = BeautifulSoup(markup, "html.parser")
print(soup)   # <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>
tag = soup.b
tag.insert_before("BEFORE ")  
tag.insert_after(" AFTER")
tag.insert(0, "INSERT0 ")  # Insert inside tag
tag.append(" APPEND") # Append inside tag, at the end

print(soup)  
# BEFORE <span class="tag">&lt;b&gt;</span>INSERT0 Some text APPEND<span class="tag">&lt;/b&gt;</span> AFTER
</pre>
<a name="TagContents"> </a>
<p class="group">Loop through tag contents</p>
<pre>
# Different ways of iterating through 
# the contents of a tag

markup = """
<span class="tag">&lt;div&gt;</span>
<span class="tag">&lt;style&gt;</span>pre { overflow: auto; }<span class="tag">&lt;/style&gt;</span>
<span class="tag">&lt;script&gt;</span>var x = 0<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;!--beautiful colors --&gt;</span>  
<span class="tag">&lt;p&gt;</span>Colors - blue <span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p&gt;</span>Shapes - circle <span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/div&gt;</span> 
"""

from bs4 import BeautifulSoup
soup = BeautifulSoup(markup, "html.parser")
print(soup, "\n")
tag = soup.div

<b># get_type() turns these:</b>
#   <span class="tag">&lt;class 'bs4.element.NavigableString'&gt;</span>
#   <span class="tag">&lt;class 'bs4.element.Tag'&gt;</span>
#   <span class="tag">&lt;class 'bs4.element.Stylesheet'&gt;</span>
#   <span class="tag">&lt;class 'bs4.element.Script'&gt;</span>
#   <span class="tag">&lt;class 'bs4.element.Comment'&gt;</span>
# 
<b># into these:</b>
#   String
#   Tag
#   Stylesheet
#   Script
#   Comment

def get_type(item):
  if "Tag" in str(type(item)):
    return "Tag    "
  elif "String" in str(type(item)):
    return "String "
  elif "Comment" in str(type(item)):
    return "Comment"
  elif "Stylesheet" in str(type(item)):
    return "Stylesheet "
  elif "Script" in str(type(item)):
    return "Script "
  else:
    return str(type(item))


<b># tag.contents</b>

print("\ntag.contents\n")
for a in tag.contents:
  print("#  ", get_type(a), repr(str(a)))

#   String  '\n'
#   Tag     '<span class="tag">&lt;style&gt;</span>pre { overflow: auto; }<span class="tag">&lt;/style&gt;</span>'
#   String  '\n'
#   Tag     '<span class="tag">&lt;script&gt;</span>var x = 0<span class="tag">&lt;/script&gt;</span>'
#   String  '\n'
#   Comment 'beautiful colors '
#   String  '\n'
#   Tag     '<span class="tag">&lt;p&gt;</span>Colors - blue <span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   String  '\n'
#   Tag     '<span class="tag">&lt;p&gt;</span>Shapes - circle <span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   String  '\n'


<b># tag.children - Seems to be same as .contents</b>

print("\ntag.children\n")
for a in tag.children:
  print("#  ", get_type(a), repr(str(a)))

#   String  '\n'
#   Tag     '<span class="tag">&lt;style&gt;</span>pre { overflow: auto; }<span class="tag">&lt;/style&gt;</span>'
#   String  '\n'
#   Tag     '<span class="tag">&lt;script&gt;</span>var x = 0<span class="tag">&lt;/script&gt;</span>'
#   String  '\n'
#   Comment 'beautiful colors '
#   String  '\n'
#   Tag     '<span class="tag">&lt;p&gt;</span>Colors - blue <span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   String  '\n'
#   Tag     '<span class="tag">&lt;p&gt;</span>Shapes - circle <span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   String  '\n'


<b># tag.next_elements - Iterates through nested tags and strings</b>

# This is the most comprehensive way of
# walking through a tag.

# For styles, first it shows the whole tag 
# then the next line is the style sheet
# inside the tag.
#
# The style sheet has the type:
#    <span class="tag">&lt;class 'bs4.element.Stylesheet'&gt;</span>
#
# Same kinda thing with scripts except
# with this type:
#    <span class="tag">&lt;class 'bs4.element.Script'&gt;</span>

print("\ntag.next_elements\n")
for a in tag.next_elements:
  print("#  ", get_type(a), repr(str(a)))

#   String  '\n'
#   Tag     '<span class="tag">&lt;style&gt;</span>pre { overflow: auto; }<span class="tag">&lt;/style&gt;</span>'
#   Stylesheet  'pre { overflow: auto; }'
#   String  '\n'
#   Tag     '<span class="tag">&lt;script&gt;</span>var x = 0<span class="tag">&lt;/script&gt;</span>'
#   Script  'var x = 0'
#   String  '\n'
#   Comment 'beautiful colors '
#   String  '\n'
#   Tag     '<span class="tag">&lt;p&gt;</span>Colors - blue <span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   String  'Colors - blue '
#   Tag     '<span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span>'
#   String  'red'
#   Tag     '<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span>'
#   String  'or purple'
#   String  ' and '
#   Tag     '<span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span>'
#   String  'green'
#   String  '\n'
#   Tag     '<span class="tag">&lt;p&gt;</span>Shapes - circle <span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   String  'Shapes - circle '
#   Tag     '<span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span>'
#   String  'square'
#   String  ' and '
#   Tag     '<span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span>'
#   String  'rectangle'
#   String  '\n'
#   String  '\n'


<b># tag.find_all_next() - Iterates through nested tags, skips strings and comments</b>

print("\ntag.find_all_next()\n")
for a in tag.find_all_next():
  print("#  ", get_type(a), repr(str(a)))

#   Tag     '<span class="tag">&lt;style&gt;</span>pre { overflow: auto; }<span class="tag">&lt;/style&gt;</span>'
#   Tag     '<span class="tag">&lt;script&gt;</span>var x = 0<span class="tag">&lt;/script&gt;</span>'
#   Tag     '<span class="tag">&lt;p&gt;</span>Colors - blue <span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   Tag     '<span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span>'
#   Tag     '<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span>'
#   Tag     '<span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span>'
#   Tag     '<span class="tag">&lt;p&gt;</span>Shapes - circle <span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   Tag     '<span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span>'
#   Tag     '<span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span>'


<b># tag(True) - Same as .find_all_next()</b>

print("\ntag(True)\n")
for a in tag(True):
  print("#  ", get_type(a), repr(str(a)))

#   Tag     '<span class="tag">&lt;style&gt;</span>pre { overflow: auto; }<span class="tag">&lt;/style&gt;</span>'
#   Tag     '<span class="tag">&lt;script&gt;</span>var x = 0<span class="tag">&lt;/script&gt;</span>'
#   Tag     '<span class="tag">&lt;p&gt;</span>Colors - blue <span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   Tag     '<span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span>'
#   Tag     '<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span>'
#   Tag     '<span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span>'
#   Tag     '<span class="tag">&lt;p&gt;</span>Shapes - circle <span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>'
#   Tag     '<span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span>'
#   Tag     '<span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span>'


<b># View tag as a list of tokens</b>

# This may not help anybody, but I thought
# I would include it anyway

import re
 
s = str(soup.div)

# Tokenize by placing a null before "&lt;" 
#   and after "&gt;" , then split on null
#   and remove empty strings

s = re.sub(r"&lt;", r"\0&lt;", s, flags=re.DOTALL)
s = re.sub("&gt;", r"&gt;\0", s, flags=re.DOTALL)
tokens = list(i for i in s.split(sep="\0")  if len(i)&gt;0) 

print("\nTokens\n")
for line in tokens:
  print("#", repr(line))

# '<span class="tag">&lt;div&gt;</span>'
# '\n'
# '<span class="tag">&lt;style&gt;</span>'
# 'pre { overflow: auto; }'
# '<span class="tag">&lt;/style&gt;</span>'
# '\n'
# '<span class="tag">&lt;script&gt;</span>'
# 'var x = 0'
# '<span class="tag">&lt;/script&gt;</span>'
# '\n'
# '<span class="tag">&lt;!--beautiful colors --&gt;</span>'
# '\n'
# '<span class="tag">&lt;p&gt;</span>'
# 'Colors - blue '
# '<span class="tag">&lt;b&gt;</span>'
# 'red'
# '<span class="tag">&lt;u&gt;</span>'
# 'or purple'
# '<span class="tag">&lt;/u&gt;</span>'
# '<span class="tag">&lt;/b&gt;</span>'
# ' and '
# '<span class="tag">&lt;i&gt;</span>'
# 'green'
# '<span class="tag">&lt;/i&gt;</span>'
# '<span class="tag">&lt;/p&gt;</span>'
# '\n'
# '<span class="tag">&lt;p&gt;</span>'
# 'Shapes - circle '
# '<span class="tag">&lt;b&gt;</span>'
# 'square'
# '<span class="tag">&lt;/b&gt;</span>'
# ' and '
# '<span class="tag">&lt;i&gt;</span>'
# 'rectangle'
# '<span class="tag">&lt;/i&gt;</span>'
# '<span class="tag">&lt;/p&gt;</span>'
# '\n'
# '<span class="tag">&lt;/div&gt;</span>'

</pre>
<a name="Navigating"> </a>
<p class="group">Navigating</p>
<pre>
markup  = "<span class="tag">&lt;div&gt;</span>Parent"
markup += "<span class="tag">&lt;p&gt;</span>Sibling before<span class="tag">&lt;/p&gt;</span>"
markup += "<span class="tag">&lt;p id=\"Here\"&gt;</span>You are here"
markup +=    "<span class="tag">&lt;b&gt;</span>Child 1<span class="tag">&lt;/b&gt;</span><span class="tag">&lt;i&gt;</span>Child 2<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>"
markup += "<span class="tag">&lt;p&gt;</span>Sibling after<span class="tag">&lt;/p&gt;</span>"
markup += "<span class="tag">&lt;/div&gt;</span>"

from bs4 import BeautifulSoup
soup = BeautifulSoup(markup, "html.parser")
print(soup, "\n")

tag = soup.find("p", id="Here")
print("# tag: \n  ", tag)
print("\n# tag.parent: ")
print("#  ", tag.parent)
print("\n# tag.previous_sibling: ", tag.previous_sibling)
print("\n# tag.next_sibling:     ", tag.next_sibling)
print("\n# tag.previous_element: ", tag.previous_element)
print("\n# tag.next_element:     ", tag.next_element)
print("\n# tag.children:")
for child in tag.children:
  print("#  ", child)


# tag: 
#  <span class="tag">&lt;p id="Here"&gt;</span>You are here<span class="tag">&lt;b&gt;</span>Child 1<span class="tag">&lt;/b&gt;</span><span class="tag">&lt;i&gt;</span>Child 2<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>

# tag.parent:  
#  <span class="tag">&lt;div&gt;</span>Parent
#  <span class="tag">&lt;p&gt;</span>Sibling before<span class="tag">&lt;/p&gt;</span>
#  <span class="tag">&lt;p id="Here"&gt;</span>You are here<span class="tag">&lt;b&gt;</span>Child 1<span class="tag">&lt;/b&gt;</span><span class="tag">&lt;i&gt;</span>Child 2<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>
#  <span class="tag">&lt;p&gt;</span>Sibling after<span class="tag">&lt;/p&gt;</span><span class="tag">&lt;/div&gt;</span>

# tag.previous_sibling:  <span class="tag">&lt;p&gt;</span>Sibling before<span class="tag">&lt;/p&gt;</span>

# tag.next_sibling:      <span class="tag">&lt;p&gt;</span>Sibling after<span class="tag">&lt;/p&gt;</span>

# tag.previous_element:  Sibling before

# tag.next_element:      You are here

# tag.children: 
#   You are here
#   <span class="tag">&lt;b&gt;</span>Child 1<span class="tag">&lt;/b&gt;</span>
#   <span class="tag">&lt;i&gt;</span>Child 2<span class="tag">&lt;/i&gt;</span>
</pre>
<a name="Modify"> </a>
<p class="group">Replace a tag with HTML</p>
<pre> 
# Place html in a string, convert the string
# into a soup tag, and then put the soup tag 
# into the parse tree using either replace_with()
# append() or one of the insert methods.

markup = """
<span class="tag">&lt;div&gt;</span>
<span class="tag">&lt;p&gt;</span>Colors - blue <span class="tag">&lt;b&gt;</span>red<span class="tag">&lt;u&gt;</span>or purple<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>green<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/div&gt;</span> 
"""

from bs4 import BeautifulSoup
soup = BeautifulSoup(markup, "html.parser")

# Put HTML into a string
s = "<span class="tag">&lt;p&gt;</span>Shapes - circle <span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>"

# Make a soup tag
new_tag = BeautifulSoup(s, "html.parser")

# Replace the existing p tag
soup.p.replace_with(new_tag)

print(soup)

# <span class="tag">&lt;div&gt;</span>
# <span class="tag">&lt;p&gt;</span>Shapes - circle <span class="tag">&lt;b&gt;</span>square<span class="tag">&lt;/b&gt;</span> and <span class="tag">&lt;i&gt;</span>rectangle<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/p&gt;</span>
# <span class="tag">&lt;/div&gt;</span> 
</pre>
<a name="NewTag"> </a>
<p class="group">.new_tag() - Create new tag</p>
<pre>
# Use .new_tag() in combination with 
#   .insert_before()  .insert_after()  .append()
#   .insert()  .wrap()  or  .replace_with()

from bs4 import BeautifulSoup
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span><span class="tag">&lt;/b&gt;</span>", "html.parser")
new_tag = soup.new_tag("a", href="http://www.example.com")
new_tag.string = "Link to example"

# b.append(new_tag) places new_tag
#    inside bold tag, at end
soup.b.append(new_tag)
print(soup)   

# <span class="tag">&lt;b&gt;</span><span class="tag">&lt;a href="http://www.example.com"&gt;</span>Link to example<span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/b&gt;</span>
</pre>
<a name="InsertAppend"> </a>
<p class="group"> .insert_before()  .insert_after(), .insert(0) and .append()</p>
<pre>
  
# These work with both tags and strings

from bs4 import BeautifulSoup

<b># .insert_before() </b>
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>", "html.parser")
new_tag = soup.new_tag("i")
new_tag.string = "INSERT_BEFORE"
print("\n", soup)   # <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>

soup.b.insert_before(new_tag)
print("\n", soup)   # <span class="tag">&lt;i&gt;</span>INSERT_BEFORE<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>

soup.b.insert_before(" String_Before ")
print("\n", soup)   # <span class="tag">&lt;i&gt;</span>INSERT_BEFORE<span class="tag">&lt;/i&gt;</span> String_Before <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>

<b># .insert_after()</b>
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>", "html.parser")
new_tag = soup.new_tag("i")
new_tag.string = "INSERT_AFTER"
print("\n", soup)   # <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>

soup.b.insert_after(new_tag)
print("\n", soup)   #  <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span><span class="tag">&lt;i&gt;</span>INSERT_AFTER<span class="tag">&lt;/i&gt;</span>

soup.b.insert_after(" String_After ")
print("\n", soup)   #  <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span> String_After <span class="tag">&lt;i&gt;</span>INSERT_AFTER<span class="tag">&lt;/i&gt;</span>

<b># .insert(0) - Insert inside a tag</b>
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>", "html.parser")
new_tag = soup.new_tag("i")
new_tag.string = "INSERT(0)"
print("\n", soup)   # <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>

soup.b.insert(0, new_tag)
print("\n", soup)   #  <span class="tag">&lt;b&gt;</span><span class="tag">&lt;i&gt;</span>INSERT(0)<span class="tag">&lt;/i&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>

soup.b.insert(0, " String_Insert0 ")
print("\n", soup)   # <span class="tag">&lt;b&gt;</span> String_Insert0 <span class="tag">&lt;i&gt;</span>INSERT(0)<span class="tag">&lt;/i&gt;</span> Some text<span class="tag">&lt;/b&gt;</span>

<b># .append() - Append inside a tag</b>
soup = BeautifulSoup("<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>", "html.parser")
new_tag = soup.new_tag("i")
new_tag.string = "APPEND"
print("\n", soup)   # <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>

soup.b.append(new_tag)
print("\n", soup)   #  <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;i&gt;</span>APPEND<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/b&gt;</span>

soup.b.append(" String_Append ")
print("\n", soup)   #  <span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;i&gt;</span>APPEND<span class="tag">&lt;/i&gt;</span> String_Append <span class="tag">&lt;/b&gt;</span>
</pre>
<a name="insert"> </a>
<p class="group">.insert() - Add tag/text at numeric position</p>
<pre>
# .insert() works on the inside of a tag as if
# it were a list. 

# .contents views the inside of a tag as a list
# and can be used as a guide.

# .insert(0, t) - Puts t before .contents
# .insert(1, t) - Puts t between .contents[0] and .contents[1] 
# .insert(2, t) - Puts t between .contents[1] and .contents[2] 
# .append(t)    - Puts t after .contents

# tag.insert(len(tag.contents), t) puts
# t at last position and is the same as 
# tag.append(t)

# As of version 4.12.3 .insert() does not accept 
# negative numbers like a list does.
# tag.insert(-1, new_tag) throws an exception

from bs4 import BeautifulSoup
markup = "<span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;u&gt;</span>more<span class="tag">&lt;/u&gt;</span> text<span class="tag">&lt;/b&gt;</span>"
soup = BeautifulSoup(markup, "html.parser")
print("soup: ", soup)

print("# contents: ", soup.b.contents)  #  ['Some ', <span class="tag">&lt;u&gt;</span>more<span class="tag">&lt;/u&gt;</span>, ' text']
print("# contents len: ", len(soup.b.contents))  #  3

def add_tag(s, pos, markup):
  soup = BeautifulSoup(markup, "html.parser")
  new_tag = soup.new_tag("i")
  new_tag.string = s
  soup.b.insert(pos, new_tag)
  print("\n# ", soup)  

add_tag("ZERO", 0, markup)
add_tag("ONE", 1, markup)
add_tag("TWO", 2, markup)
add_tag("THREE", 3, markup)

# Since 3 is the last position
# soup.b.insert(3, new_tag) is the same as
# soup.b.append(new_tag)

# Here's the output:

# contents:   ['Some ', <span class="tag">&lt;u&gt;</span>more<span class="tag">&lt;/u&gt;</span>, ' text']
# contents len:   3

# <span class="tag">&lt;b&gt;</span><span class="tag">&lt;i&gt;</span>ZERO<span class="tag">&lt;/i&gt;</span>Some <span class="tag">&lt;u&gt;</span>more<span class="tag">&lt;/u&gt;</span> text<span class="tag">&lt;/b&gt;</span>

# <span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;i&gt;</span>ONE<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;u&gt;</span>more<span class="tag">&lt;/u&gt;</span> text<span class="tag">&lt;/b&gt;</span>

# <span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;u&gt;</span>more<span class="tag">&lt;/u&gt;</span><span class="tag">&lt;i&gt;</span>TWO<span class="tag">&lt;/i&gt;</span> text<span class="tag">&lt;/b&gt;</span>

# <span class="tag">&lt;b&gt;</span>Some <span class="tag">&lt;u&gt;</span>more<span class="tag">&lt;/u&gt;</span> text<span class="tag">&lt;i&gt;</span>THREE<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/b&gt;</span>
</pre>
<a name="ReplaceWith"> </a>
<p class="group">.replace_with() - Replace tag and contents</p>
<pre>
from bs4 import BeautifulSoup
markup = "<span class="tag">&lt;b&gt;</span>Some text<span class="tag">&lt;/b&gt;</span>"
soup = BeautifulSoup(markup, "html.parser")
print("soup: ", soup)

soup.b.replace_with(soup.new_tag("i"))
soup.i.string = "New text"

print(soup)  # <span class="tag">&lt;i&gt;</span>New text<span class="tag">&lt;/i&gt;</span>"

# replace_with() returns tag that was replaced.
</pre>
<a name="Wrap"> </a>
<p class="group">.wrap() - Wrap tag</p>
<pre>
from bs4 import BeautifulSoup
markup = "<span class="tag">&lt;p&gt;</span>I wish I was bold.<span class="tag">&lt;/p&gt;</span>"
soup = BeautifulSoup(markup, "html.parser")
print("soup: ", soup)

#  Make the text inside the <span class="tag">&lt;p&gt;</span> tag bold
soup.p.string.wrap(soup.new_tag("b"))
print(soup)  # <span class="tag">&lt;p&gt;</span><span class="tag">&lt;b&gt;</span>I wish I was bold.<span class="tag">&lt;/b&gt;</span><span class="tag">&lt;/p&gt;</span>

#  Now enclose the <span class="tag">&lt;p&gt;</span> tag in a <span class="tag">&lt;div&gt;</span> tag
soup.p.wrap(soup.new_tag("div"))
print(soup)  # <span class="tag">&lt;div&gt;</span><span class="tag">&lt;p&gt;</span><span class="tag">&lt;b&gt;</span>I wish I was bold.<span class="tag">&lt;/b&gt;</span><span class="tag">&lt;/p&gt;</span><span class="tag">&lt;/div&gt;</span>
</pre>
<a name="Unwrap"> </a>
<p class="group">.unwrap() - Remove tag, leave contents</p>
<pre>
from bs4 import BeautifulSoup
markup = """
<span class="tag">&lt;a href="http://example.com/"&gt;</span>I linked to <span class="tag">&lt;i&gt;</span>example.com<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/a&gt;</span>
"""
soup = BeautifulSoup(markup, "html.parser")
print("soup: ", soup)

removed = soup.a.i.unwrap()

print(soup)    # <span class="tag">&lt;a href="http://example.com/"&gt;</span>I linked to example.com<span class="tag">&lt;/a&gt;</span>
print(removed) # <span class="tag">&lt;i&gt;</span><span class="tag">&lt;/i&gt;</span>
</pre>
<a name="ReplaceTag"> </a>
<p class="group">Replace tag, don't change contents</p>
<pre>
# This wraps a new <span class="tag">&lt;p&gt;</span> tag, and then unwraps old <span class="tag">&lt;div&gt;</span> tag

from bs4 import BeautifulSoup
markup = """
<span class="tag">&lt;div&gt;</span><span class="tag">&lt;a href="http://example.com/"&gt;</span>I linked to <span class="tag">&lt;i&gt;</span>example.com<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/a&gt;</span>;<span class="tag">&lt;/div&gt;</span>
"""
soup = BeautifulSoup(markup, "html.parser")
print("soup: ", soup)

soup.div.wrap(soup.new_tag("p"))
soup.p.div.unwrap()

print(soup)    # <span class="tag">&lt;p&gt;</span><span class="tag">&lt;a href="http://example.com/"&gt;</span>I linked to <span class="tag">&lt;i&gt;</span>example.com<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/a&gt;</span>;<span class="tag">&lt;/p&gt;</span>
</pre>
<a name="Clear"></a>
<p class="group">.clear() - Leave tag, clear contents</p>
<pre>
from bs4 import BeautifulSoup
markup = """
<span class="tag">&lt;a href="http://example.com/"&gt;</span>
I linked to <span class="tag">&lt;i&gt;</span>example.com<span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/a&gt;</span>
"""
soup = BeautifulSoup(markup, "html.parser")
print("soup: ", soup)

soup.a.clear()
print(soup)   #  <span class="tag">&lt;a href="http://example.com/"&gt;</span><span class="tag">&lt;/a&gt;</span>
</pre>
<a name="Extract"></a>
<p class="group">.extract() - Remove tag and contents</p>
<pre>
# Remove all javascript and stylesheet sections
for tag in soup(["script", "style"]):
  tag.extract()
</pre>
<a name="Decompose"></a>
<p class="group">.decompose() - Just like extract(), but obliterates tag and contents</p>
<pre>
# Remove all javascript and stylesheet sections
for tag in soup(["script", "style"]):
  tag.decompose()  
</pre>
</body></html>